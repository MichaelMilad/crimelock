const axios = require('axios');
const Agent = require('agentkeepalive').HttpsAgent;

const listData = require('./listData.json');

const keepaliveAgent = new Agent({
  maxSockets: 60, // or 128 / os.cpus().length if running node across multiple CPUs
  maxFreeSockets: 60, // or 128 / os.cpus().length if running node across multiple CPUs
  timeout: 60000,
  freeSocketTimeout: 30000,
});

listData.forEach(async (item) => {
  await axios({
    method: 'post',
    url: 'https://api.trumarket.dev/list-management/lists',
    data: item,
    headers: {
      Authorization:
        'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJPRkFzSFJab2RNQzhQd2toVy1fTHpKd0FGR2NXeEYxMFZRMktyV2NXLW9zIn0.eyJleHAiOjE2NzUyNzgzNzksImlhdCI6MTY3NTI2MDM3OSwiYXV0aF90aW1lIjoxNjc1MjU4NjcwLCJqdGkiOiJmNzRjYzVhMS1jODRkLTQ2MmUtYTc5MS1mNGM5Mzg2YzE5OTEiLCJpc3MiOiJodHRwczovL3NlY3VyZS50cnVmbGEuZGV2L2F1dGgvcmVhbG1zL2Jlc3RpbnN1cmFuY2UiLCJhdWQiOlsidHJ1ZmxhOnBheW1lbnQtYXBpIiwidHJ1bWFya2V0LWFwaSIsInRydWZsYTp0cnVmbG93LWFwaSIsInJlYWxtLW1hbmFnZW1lbnQiLCJhY2NvdW50Il0sInN1YiI6ImFlYWEyM2I5LTg0ZjMtNDgyZi1iNmEzLTc1YTY1NmRkMGQ2MiIsInR5cCI6IkJlYXJlciIsImF6cCI6InRydW1hcmtldC13ZWIiLCJub25jZSI6IjM0YzgyY2E1LTJjNzktNGU5Yy04Yjk5LTE2MzhhNzhiMWI0MyIsInNlc3Npb25fc3RhdGUiOiI5OGYxMWEyNi1hYmRhLTRmZTUtOGJiMi1kYzRiZmE5OWY1NDgiLCJhY3IiOiIwIiwiYWxsb3dlZC1vcmlnaW5zIjpbImh0dHBzOi8vYXBpLnRydW1hcmtldC5kZXYvKiIsImh0dHBzOi8vYmVzdGluc3VyYW5jZS50cnVtYXJrZXQuZGV2IiwiaHR0cHM6Ly9iZXN0aW5zdXJhbmNlLnRydW1hcmtldC5kZXYvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC8qIiwiaHR0cDovL2xvY2FsaG9zdDozMDAwIl0sInJlYWxtX2FjY2VzcyI6eyJyb2xlcyI6WyJvZmZsaW5lX2FjY2VzcyIsInVtYV9hdXRob3JpemF0aW9uIiwiZGVmYXVsdC1yb2xlcy1iZXN0aW5zdXJhbmNlIl19LCJyZXNvdXJjZV9hY2Nlc3MiOnsidHJ1ZmxhOnRydWZsb3ctYXBpIjp7InJvbGVzIjpbInVzZXIiXX0sInJlYWxtLW1hbmFnZW1lbnQiOnsicm9sZXMiOlsibWFuYWdlLXJlYWxtIiwibWFuYWdlLXVzZXJzIiwidmlldy1jbGllbnRzIiwidmlldy1hdXRob3JpemF0aW9uIiwibWFuYWdlLWF1dGhvcml6YXRpb24iLCJxdWVyeS1jbGllbnRzIl19LCJ0cnVtYXJrZXQtYXBpIjp7InJvbGVzIjpbInRlYW1fdmlldyIsImNvbmZpZ3VyYXRpb25fdmlldyIsInJlcXVlc3QtaW5zdGFuY2VfbWFuYWdlX2Fzc2lnbmVkIiwibG9jYXRpb25fdmlldyIsInJvbGVfdmlldyIsInJlcXVlc3QtaW5zdGFuY2VfYXNzaWduIiwicmVxdWVzdC1pbnN0YW5jZV9tYW5hZ2UiLCJwcm9kdWN0LWRlZmluaXRpb25fdmlldyIsImF0dGFjaG1lbnRfbWFuYWdlIiwicmVxdWVzdC1sb2dfdmlldyIsImFjdGl2aXR5X21hbmFnZSIsImFjdGlvbl9tYW5hZ2UiLCJyZXF1ZXN0LWxvZ19tYW5hZ2UiLCJyb2xlX21hbmFnZSIsImNvbmZpZ3VyYXRpb25fbWFuYWdlIiwicHJvZHVjdC1pbnN0YW5jZV92aWV3IiwidXNlcl9tYW5hZ2UiLCJjb21wYW55X3ZpZXciLCJzZXJ2aWNlLXVzZXJfdmlldyIsInJlcXVlc3QtZGVmaW5pdGlvbl92aWV3X2Fzc2lnbmVkIiwic2hhcmVkLXJlcXVlc3QtaW5zdGFuY2VfbWFuYWdlIiwiYXR0YWNobWVudF92aWV3IiwidXNlcl92aWV3IiwidGVhbV9tYW5hZ2UiLCJyZXF1ZXN0LWRlZmluaXRpb25fdmlldyIsInByb2R1Y3QtaW5zdGFuY2VfbWFuYWdlIiwicmVxdWVzdC1pbnN0YW5jZV9hc3NpZ24tbXlzZWxmIiwiYWN0aW9uX3ZpZXciLCJhZG1pbi10ZWFtX3ZpZXciLCJhY3Rpdml0eV92aWV3IiwicmVxdWVzdC1pbnN0YW5jZV92aWV3LXNoYXJlZCIsInJlcXVlc3QtaW5zdGFuY2VfbWFuYWdlLXNoYXJlZCIsImFjdGl2aXR5LXR5cGVfdmlldyIsImxvY2F0aW9uX21hbmFnZSIsInJlcXVlc3QtaW5zdGFuY2VfZm9yY2UtYXNzaWduIiwicHJvZHVjdC1kZWZpbml0aW9uX21hbmFnZSIsInJlcXVlc3QtZGVmaW5pdGlvbl9tYW5hZ2UiLCJyZXF1ZXN0LWluc3RhbmNlX3ZpZXciLCJzaGFyZWQtcmVxdWVzdC1pbnN0YW5jZV92aWV3IiwibGlzdF9tYW5hZ2UiLCJyZXF1ZXN0LWluc3RhbmNlX2ZvcmNlLWFzc2lnbi1teXNlbGYiLCJwcm9kdWN0LWRlZmluaXRpb25fdmlld19hc3NpZ25lZCIsImNsaWVudF92aWV3Il19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCB0ZW5hbnQtaW5mbyBwYXltZW50IGVtYWlsIHRydW1hcmtldCBwcm9maWxlIiwiZW1haWxfdmVyaWZpZWQiOnRydWUsImRhdGV0aW1lRm9ybWF0IjoiZGQvbW0veXl5eSIsIm5hbWUiOiJNaWNoYWVsIE1pbGFkIiwiZ3JvdXBzIjpbIi9jb21wYW55L2xvY2F0aW9ucy9DcmltZSBJbnN1cmFuY2UgQWRtaW5zIiwiL2NvbXBhbnkvdGVhbXMvQ3JpbWUgSW5zdXJhbmNlIEFkbWlucyIsIi9jb21wYW55L2xvY2F0aW9ucy9DcmltZSBJbnN1cmFuY2UgQnJva2VycyIsIi9jb21wYW55L3RlYW1zL0ltcGxlbWVudGF0aW9uIFRlYW0iLCIvY29tcGFueS9sb2NhdGlvbnMvaW1wbGVtZW50YXRpb24gRWd5cHQiXSwiY3VycmVuY3kiOiJHQlAiLCJyZWFsbSI6ImJlc3RpbnN1cmFuY2UiLCJwcmVmZXJyZWRfdXNlcm5hbWUiOiJtaWNoYWVsLm1AdHJ1ZmxhLmNvbSIsImxvY2FsZSI6ImVuLUNBIiwiZ2l2ZW5fbmFtZSI6Ik1pY2hhZWwiLCJmYW1pbHlfbmFtZSI6Ik1pbGFkIiwiZW1haWwiOiJtaWNoYWVsLm1AdHJ1ZmxhLmNvbSJ9.Sgv4V91R4ICuK6BeQiagj82X0l8BOWdTq3yLd5zBD9rbMNeMJx9rb_MkjemQ1P9LTj_ucBBZlVDa620nBX271QNtTvHDLI-74zawZZeezVjts1vIB2ayXERhF8cJ9OoNsbsjVBYVM_KdkvnwyRbmCUb-jMrG8p2MHliny5VSQ8NEu7uW_niWfcnw8MWUyhNpjNL2bUm9_rQ4thRZxSNv2B_gkJ-FzaFJu40NlYc9XJ3HEINooJxFiA1RzCiX93AnmV8XpH1FWPC93skbq03EleRB7KJxSbd11naDmN2IIo5zu0oZ5lNM9MM6z-2z-KMMPvntFBC3EXYSnChLuJuNgw',
    'Content-Type': 'application/json'
    },
    httpsAgent: keepaliveAgent,
  })
    .then((data) => console.log('Uploaded With Key', data.statusText))
    .catch((error) => console.log('An Error,', error.response.status, error.response.statusText));
});
