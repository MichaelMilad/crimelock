const axios = require('axios');
const Agent = require('agentkeepalive').HttpsAgent;

const listData = require('./listData.json');

const keepaliveAgent = new Agent({
  maxSockets: 60, // or 128 / os.cpus().length if running node across multiple CPUs
  maxFreeSockets: 60, // or 128 / os.cpus().length if running node across multiple CPUs
  timeout: 60000,
  freeSocketTimeout: 30000,
});

listData.forEach(async (item) => {
  await axios({
    method: 'post',
    url: 'https://api.trumarket.dev/list-management/lists',
    data: item,
    headers: {
      Authorization:
        'Bearer eyJhbGciOiJSUzI1NiIsInR5cCIgOiAiSldUIiwia2lkIiA6ICJaRFVnUE5maV8taDhFRi1POXFRNWdNNmNNQ0dZUDI1SHZ2Zjl2Tk8wQzlJIn0.eyJleHAiOjE2NzY4NTk3ODAsImlhdCI6MTY3Njg0MTc4MCwiYXV0aF90aW1lIjoxNjc2ODEyMjg3LCJqdGkiOiI1MDE2ZjJiZi0yZDRhLTRhYjgtODMxZS03NDM2ZDg1MTRhNjEiLCJpc3MiOiJodHRwczovL3NlY3VyZS50cnVmbGEuZGV2L2F1dGgvcmVhbG1zL2xvY2t0b24iLCJhdWQiOlsidHJ1bWFya2V0LWFwaSIsInRydWZsYTp0cnVwYXltZW50LWFwaSIsInRydWZsYTp0cnVmbG93LWFwaSIsInJlYWxtLW1hbmFnZW1lbnQiLCJ0cnVmbGE6dHJ1cmVhY2gtYXBpIiwiYWNjb3VudCJdLCJzdWIiOiIxN2E2M2UyNy1iOGViLTQ0YmYtYmI3Yy02ODZiZDMyNWFkZjYiLCJ0eXAiOiJCZWFyZXIiLCJhenAiOiJ0cnVtYXJrZXQtd2ViIiwibm9uY2UiOiJhMmUzMzcwNS0xYWNkLTQ1MGItODBlZS02Y2Y0ZDNiZDNkMjYiLCJzZXNzaW9uX3N0YXRlIjoiOWRjYTk0NTUtMjVkZi00N2VkLWJkNTQtM2JiZWIxOWYzZTRjIiwiYWNyIjoiMCIsImFsbG93ZWQtb3JpZ2lucyI6WyJodHRwczovL2FwaS50cnVtYXJrZXQuZGV2LyoiLCJodHRwczovL2xvY2t0b24udHJ1bWFya2V0LmRldi8qIiwiaHR0cHM6Ly9sb2NrdG9uLnRydW1hcmtldC5kZXYiLCJodHRwOi8vbG9jYWxob3N0OjMwMDAvKiIsImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMCJdLCJyZWFsbV9hY2Nlc3MiOnsicm9sZXMiOlsiZGVmYXVsdC1yb2xlcy1sb2NrdG9uIiwib2ZmbGluZV9hY2Nlc3MiLCJ1bWFfYXV0aG9yaXphdGlvbiJdfSwicmVzb3VyY2VfYWNjZXNzIjp7InRydWZsYTp0cnVmbG93LWFwaSI6eyJyb2xlcyI6WyJhZG1pbiJdfSwicmVhbG0tbWFuYWdlbWVudCI6eyJyb2xlcyI6WyJ2aWV3LXJlYWxtIiwidmlldy1pZGVudGl0eS1wcm92aWRlcnMiLCJtYW5hZ2UtaWRlbnRpdHktcHJvdmlkZXJzIiwiaW1wZXJzb25hdGlvbiIsInJlYWxtLWFkbWluIiwiY3JlYXRlLWNsaWVudCIsIm1hbmFnZS11c2VycyIsInF1ZXJ5LXJlYWxtcyIsInZpZXctYXV0aG9yaXphdGlvbiIsInF1ZXJ5LWNsaWVudHMiLCJxdWVyeS11c2VycyIsIm1hbmFnZS1ldmVudHMiLCJtYW5hZ2UtcmVhbG0iLCJ2aWV3LWV2ZW50cyIsInZpZXctdXNlcnMiLCJ2aWV3LWNsaWVudHMiLCJtYW5hZ2UtYXV0aG9yaXphdGlvbiIsIm1hbmFnZS1jbGllbnRzIiwicXVlcnktZ3JvdXBzIl19LCJ0cnVtYXJrZXQtYXBpIjp7InJvbGVzIjpbImludm9pY2VfbWFuYWdlIiwicmVxdWVzdC1pbnN0YW5jZV9tYW5hZ2VfYXNzaWduZWQiLCJsb2NhdGlvbl92aWV3IiwicHJvZHVjdC1kZWZpbml0aW9uX3ZpZXciLCJhdHRhY2htZW50X21hbmFnZSIsInBsYW5fbWFuYWdlIiwiYWN0aXZpdHlfbWFuYWdlIiwiY29tcGFueV9tYW5hZ2UiLCJhY3Rpb25fbWFuYWdlIiwicm9sZV9tYW5hZ2UiLCJjbGllbnRfbWFuYWdlIiwidXNlcl9tYW5hZ2UiLCJjb21wYW55X3ZpZXciLCJzZXJ2aWNlLXVzZXJfdmlldyIsImludm9pY2VfdmlldyIsInJlcXVlc3QtZGVmaW5pdGlvbl92aWV3X2Fzc2lnbmVkIiwic2hhcmVkLXJlcXVlc3QtaW5zdGFuY2VfbWFuYWdlIiwiYXR0YWNobWVudF92aWV3IiwidXNlcl92aWV3IiwicHJvZHVjdC1pbnN0YW5jZV9tYW5hZ2UiLCJwbGFuX3ZpZXciLCJzZXJ2aWNlLXVzZXJfbWFuYWdlIiwicmVxdWVzdC1pbnN0YW5jZV92aWV3LXNoYXJlZCIsImFjdGl2aXR5LXR5cGVfdmlldyIsInJlcXVlc3QtZGVmaW5pdGlvbl9tYW5hZ2UiLCJyZXF1ZXN0LWluc3RhbmNlX3ZpZXciLCJ0cmFuc2FjdGlvbl92aWV3IiwicHJvZHVjdC1kZWZpbml0aW9uX3ZpZXdfYXNzaWduZWQiLCJjbGllbnRfdmlldyIsInRlYW1fdmlldyIsImNvbmZpZ3VyYXRpb25fdmlldyIsInJvbGVfdmlldyIsInJlcXVlc3QtaW5zdGFuY2VfbWFuYWdlIiwicmVxdWVzdC1pbnN0YW5jZV9hc3NpZ24iLCJyZXF1ZXN0LWxvZ192aWV3IiwicmVxdWVzdC1sb2dfbWFuYWdlIiwiY29uZmlndXJhdGlvbl9tYW5hZ2UiLCJwcm9kdWN0LWluc3RhbmNlX3ZpZXciLCJ0ZWFtX21hbmFnZSIsInJlcXVlc3QtZGVmaW5pdGlvbl92aWV3IiwicmVxdWVzdC1pbnN0YW5jZV9hc3NpZ24tbXlzZWxmIiwiYWN0aW9uX3ZpZXciLCJhY3Rpdml0eV92aWV3IiwicmVxdWVzdC1pbnN0YW5jZV9tYW5hZ2Utc2hhcmVkIiwibG9jYXRpb25fbWFuYWdlIiwiYWRtaW4tcm9sZV9tYW5hZ2UiLCJhZG1pbi1yb2xlX3ZpZXciLCJyZXF1ZXN0LWluc3RhbmNlX2ZvcmNlLWFzc2lnbiIsInByb2R1Y3QtZGVmaW5pdGlvbl9tYW5hZ2UiLCJzaGFyZWQtcmVxdWVzdC1pbnN0YW5jZV92aWV3IiwibGlzdF9tYW5hZ2UiLCJyZXF1ZXN0LWluc3RhbmNlX2ZvcmNlLWFzc2lnbi1teXNlbGYiXX0sInRydWZsYTp0cnVyZWFjaC1hcGkiOnsicm9sZXMiOlsiZGV2ZWxvcGVyIl19LCJhY2NvdW50Ijp7InJvbGVzIjpbIm1hbmFnZS1hY2NvdW50IiwibWFuYWdlLWFjY291bnQtbGlua3MiLCJ2aWV3LXByb2ZpbGUiXX19LCJzY29wZSI6Im9wZW5pZCBlbWFpbCBwYXltZW50IHRlbmFudC1pbmZvIHByb2ZpbGUgdHJ1bWFya2V0IiwiZW1haWxfdmVyaWZpZWQiOmZhbHNlLCJkYXRldGltZUZvcm1hdCI6IkxMTCBkZCwgeXl5eSAtIGhoOm1tIGEiLCJuYW1lIjoiTWljaGFlbCBNaWxhZCIsImdyb3VwcyI6WyIvY29tcGFueS9sb2NhdGlvbnMvQWJlcmRlZW4iLCIvY29tcGFueS9sb2NhdGlvbnMvQ3JpbWVsb2NrIiwiL2NvbXBhbnkvdGVhbXMvQ3JpbWVsb2NrIEFkbWlucyIsIi9jb21wYW55L2xvY2F0aW9ucy9LYW5zYXMgQ2l0eSIsIi9jb21wYW55L2xvY2F0aW9ucy9NYW5jaGVzdGVyIiwiL2NvbXBhbnkvbG9jYXRpb25zL1RydWZsYSIsIi9jb21wYW55L3RlYW1zL1RydWZsYSBBZG1pbnMiLCIvY29tcGFueS9sb2NhdGlvbnMvV2FzaGluZ3Rvbi1EQyJdLCJjdXJyZW5jeSI6IkdCUCIsInJlYWxtIjoibG9ja3RvbiIsInByZWZlcnJlZF91c2VybmFtZSI6Im1pY2hhZWwubUB0cnVmbGEuY29tIiwibG9jYWxlIjoiZW4tR0IiLCJnaXZlbl9uYW1lIjoiTWljaGFlbCIsImZhbWlseV9uYW1lIjoiTWlsYWQiLCJlbWFpbCI6Im1pY2hhZWwubUB0cnVmbGEuY29tIn0.cyWDhpHjfMulbzOjMc63Y7y0jrfOLyJYstbzXAx18oi9esVa1JcdynDoAuh5mycA8aOHlMR_Pg9zwiY1l13FR56K-ru24wfMfFT0BJlqtiWSpYw9agRWWdW0-5zLI3GMHsKYF2hgDPqqMUgyMZeAzLO2sRItQedwNPGPX7gD-mGpTuqxdXlHm7aSx9baQpJuSZGxwWzymI0wUixXsw1h5pmC463hgGYmrovgjM4QErdjJk3ktD44OqtH5UcHJRHw7SZda8ninZ9LEFGDpZemV6Z-Ya7v5SyRF-C4pC_vZZImXwqz0oMtrWP2aUQyXeBbqnlvjHZTcFaiNigXPMtSSg',
      'Content-Type': 'application/json',
    },
    httpsAgent: keepaliveAgent,
  })
    .then((data) => console.log('Uploaded With Key', data.statusText))
    .catch((error) =>
      console.log('An Error,', error.response.status, error.response.statusText)
    );
});
